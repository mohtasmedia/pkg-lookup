#!/usr/bin/env node
"use strict";const e=require("https"),[s]=process.argv.slice(2),n=([s,n])=>new Promise((o,t)=>{e.get({hostname:s,path:n,headers:{"User-Agent":""}},e=>{const s=[];e.on("data",e=>s.push(e)),e.on("end",()=>o(JSON.parse(Buffer.concat(s)))),e.on("error",e=>t(e))})}).catch(e=>console.error(e)),o=(e,s)=>{const n={reset:"[0m",underline:"[4m",red:"[31m",green:"[32m",yellow:"[33m",cyan:"[36m"};return""+(n[s]+e+n.reset)},t=e=>o(e,"yellow")+": ",r=e=>e>=1024?(e/1024).toFixed(1)+"KB":e+"B",a=e=>console.log("    "+(e||""));(async()=>{try{const i=await n(["api.npms.io","/v2/package/"+encodeURIComponent(s)]);if("NOT_FOUND"===i.code)return console.log(i.message);const{collected:{metadata:c,github:p}}=i,l=await n(["bundlephobia.com","/api/size?package="+s]),u=c.links.repository.split("/"),{total_count:d}=await n(["api.github.com",`/search/issues?q=repo:${u[3]}/${u[4]}+is:pr+state:open&per_page=1`]);a(),a(`${o(c.name,"green")} - v${c.version}`),a(c.description),a(),a(`${t("Size / Gzipped")+r(l.size)} / ${r(l.gzip)}`),a(`${t("Open issues / PRs")+p.issues.openCount} / ${d}`),a(""+(t("Last updated")+`${(e=new Date(c.date)).getDay()}/${e.getMonth()+1}/${e.getFullYear()}`)),a(),a(""+(t("NPM")+o(c.links.npm,"underline"))),a(""+(t("Homepage")+o(c.links.homepage,"underline"))),a(""+(t("Repo")+o(c.links.repository,"underline"))),a(),a(""+(t("Liscnce")+c.license)),a()}catch(e){console.error(e)}var e})();
